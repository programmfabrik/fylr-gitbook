
# Release v6.27.1

Published 2025-12-11 11:46:13Z

* [fylr_checksums.txt](https://s3.eu-central-1.wasabisys.com/fylr-releases/v6.27.1/fylr_checksums.txt)
* [fylr_v6.27.1_darwin_amd64.tar.gz](https://s3.eu-central-1.wasabisys.com/fylr-releases/v6.27.1/fylr_v6.27.1_darwin_amd64.tar.gz)
* [fylr_v6.27.1_darwin_arm64.tar.gz](https://s3.eu-central-1.wasabisys.com/fylr-releases/v6.27.1/fylr_v6.27.1_darwin_arm64.tar.gz)
* [fylr_v6.27.1_linux_amd64.tar.gz](https://s3.eu-central-1.wasabisys.com/fylr-releases/v6.27.1/fylr_v6.27.1_linux_amd64.tar.gz)
* [fylr_v6.27.1_windows_amd64.zip](https://s3.eu-central-1.wasabisys.com/fylr-releases/v6.27.1/fylr_v6.27.1_windows_amd64.zip)

## Server

### Improved

* **File worker**: The **custom configuration for colorprofiles** now includes a
  `-`, which allows renditions to be produced without embedded
  colorprofile. [bd24e1453]
* **License Management**: The license has a new field `paid_to`. [aa5855a62]
  [f5c435ff5]
* **/api/plugin/manage**: Include a new `release` tag in the plugin's build
  info. It can be used by plugins to issue a unique release tag. [650aa6b4557c]
* **/api/xmlmapping**: Add support for `_uuid`. This allows users to add the
  `_uuid` to file metadata. [419da1a07]
* **Pages**: Improved focus setting. [75099090e]
* **File delivery**: If writing of **metadata fails**, we now deliver the file
  with a changed filename, ending in `-metadata-updated-failed`, to show users
  that metadata writing went wrong. This improves the code shipped in `6.27.0`
  where the filename was unchanged. [9417d8565]
* **Indexer**: De-duplicate term jobs during object save. This should speed up
  indexing objects with many terms. [d677058ce] [4efd06763]

### Fixed

* **IIIF Zoomer**: Fixed tile production for **TIFF with alpha channel**. This
  uses (again) **Imagemagick** instead of **Vips** to make the interim BMP
  24-bit instead of 32-bit if the source has an Alpha channel. With no further
  tricks, IM is producing a 24-bit discarding the Alpha channel whereas Vips is
  keeping it. Our BMP fast tiler code (fylr iiif) expects BMP to be 24 bit and
  errors out if the BMP is not 24 bit. [7ee2002b9]
* **Azure/S3 Support**: Support renditions which are bigger than the upload
  limit with a single upload URL are fixed now. Azure exposes a limit of 5GB for
  such connections. In order to circumvent limits of blob storage providers,
  **fylr** now uses the SDK provided upload method to copy files. Before we
  would use a direct PUT url provided by the storage provider. Some providers
  like Azure have a 5G limit on such URLs. This resulted in originals being
  uploaded correctly (using the SDK), but renditions not. In the rendition case
  we hand a put url to the exec server. That put url is now a link into the
  /fileblob endpoint of fylr which then proxies the data to the storage provider
  using the SDK. With this change uploads of renditions to S3 server should now
  be more reliable as the SDK knows tricks like retrying and chunking the
  upload. [29e62b76b]
* **/inspect/exports/export**: Fixed page after changes in `6.27.0`. [e3ab037de]
* **Indexer**: Wide **date ranges** (like million years BC), caused excessive
  memory use in **fylr** while compiling the document for the index. To prevent
  overflows and excessive memory use, the years, month and days written to the
  index for date ranges are limited by this patch. Instead of simply stepping
  the range per year, we now use bigger steps outside -1000 and 2500. The steps
  are the 10nth of the years, so for 1,000,000 years, the steps are 100,000. A
  re-index is recommended for instances where wide date ranges are  in use.
  [74b2c6295]
* **/api/export**: Fixed **loading exports** which use a **deleted metadata
  profile**. If a mapping is used in a export configuration and deleted, ignore
  that and reset the mapping to `standard`. This prevents an error which caused
  export lists to not load if an mapping was in use in any of the exports. Also,
  if a metadata mapping is deleted which is used in and export as XML export
  template, the export is no longer automatically deleted, but instead the XML
  export template is removed for affected exports. Also, set mappings to `null`
  for Pools. [46cb9af78] [cf99cf0c8] [5fdf0b0a5]
* **fylr backup/restore**: Fixed logging specific errors. Some erros where
  unable to be logged, due to an unintialized logger (introduced in `6.27.0`).
  [128fc65ff]

<!-- last commit looked at: 4efd06763 -->

## Frontend

### Improved
- **License Manager:** A new "paid until" property has been added to the license information.
- **Export Manager:** A new button has been added for the root user that allows opening an export directly in fylr’s inspect panel.

### Fixed
- **Geo JSON:** Fixed an issue where the map editor did not correctly read the Geo JSON field settings from the datamodel. This caused new fields to accept only one Geo JSON feature or prevented the “add feature” button from appearing.
- **BC Dates Filter:** The depth at which BC dates can be filtered in the filter panel has been limited. The server now uses lower granularity for very distant dates to avoid issues with Elasticsearch.
- **Change History:** Fixed the "Mark Changes" option, which in some cases caused an error that prevented the change history from displaying the correct data.
- **Metadata Mapping Editor:** Added support for using the uuid field in the metadata mapping editor for exports.
