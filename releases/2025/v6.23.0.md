
# Release v6.23.0

Published 2025-07-31 13:44:45Z

* [fylr_checksums.txt](https://s3.eu-central-1.wasabisys.com/fylr-releases/v6.23.0/fylr_checksums.txt)
* [fylr_v6.23.0_darwin_amd64.tar.gz](https://s3.eu-central-1.wasabisys.com/fylr-releases/v6.23.0/fylr_v6.23.0_darwin_amd64.tar.gz)
* [fylr_v6.23.0_darwin_arm64.tar.gz](https://s3.eu-central-1.wasabisys.com/fylr-releases/v6.23.0/fylr_v6.23.0_darwin_arm64.tar.gz)
* [fylr_v6.23.0_linux_amd64.tar.gz](https://s3.eu-central-1.wasabisys.com/fylr-releases/v6.23.0/fylr_v6.23.0_linux_amd64.tar.gz)
* [fylr_v6.23.0_windows_amd64.zip](https://s3.eu-central-1.wasabisys.com/fylr-releases/v6.23.0/fylr_v6.23.0_windows_amd64.zip)

## Important

* This release **forces a blocking re-index**. Make sure to plan enough time for
  this update as your users will not be able to access the database while the
  re-index is running.

## Server

### New

* **/api/search[type=object]**: Support `width` for `sort` for
  `_changelog.date_created` and `_changelog.date_last_updated`. With this change
  a second sort criteria in addition to these dates works. The dates are groups
  by the width. So dates in the same `day`, `week`, `month` or `year` are
  considered the same. Requires a re-index. [d9cd21e81]
* **/api/search[type=collection]**: Support searching for `_invalid_acl`. With
  this change collections with the `_invalid_acl` flag can be searched. Also in
  this patch, improved 202 message with more details about problematic
  collections when saving objects. Requires a re-index. [0a0d9e3b7] [d9684e243]
* **Renditions**: Support for captions. Captions can be configured using data
  from the object images are linked with. Captions are rendered underneath the
  image. This requires configuration as well as a forced re-produce of the
  renditions. [1242e2a07]
* **Plugin Support**: A new directive `plugin_user` can be used to export a user
  configuration into the plugin base config. With this user, plugins can use
  elevated rights to do API requests. The formula columns plugin is using this
  feature to allow formulas to run in `system.root` context. This adds generic
  support for `type:user` to base config. [7cd431b77] [c29e29f3f] [be747d642]
* **Geo Support**: Have `standard.geo.1` include standard geo from linked
  objects. This patch includes the standard geo of linked objects into the
  standard geo of the top level object. [f17af0a28]
* **/api/search/parse**: Support `geo_bounding_box` with coordinates (geohash
  and decimal). [7567e7ba9]

### Improved

* **/api/db**: Support updates for `_child_idx`. The _child_idx in the index is
  used to sort manually sorted reverse objects. This is now updatable in the
  reverse linked object using `_child_idx`. Much like `_parent_child_idx` which
  is used for reverse hierarchies. To align the API, `_child_idx` was moved into
  the object level and is now updatable. [65c4145d5] [e221a5f0e]
* **/api/collection**: Render `_has_acl` from compiled rights. This shows the
  share icon for collection if only the parent has ACL but not the actual
  collection. [b53260531]
* **Index**: Don't index terms of deleted objects. Deleted objects where part of
  the unique index as well as the term list. This patch makes sure to not
  include them in these indexes. Also support term deletions and updates
  properly. [bfad92b6a] [e2c4f4f03]
* **fylr backup & restore**: Various fixes and improvements. [a30f90e8d] [19c3ad879]
* **/api/db**: Show Object type in `ObjectInsufficientRights` error. [c572ceeab]
* **/api/export**: Support `"include_changelog": {"with_user": true}` to export
  changelog information with or without user names. Also, add support for
  changelog to `XLSX`. [2769bbed5] [03b9d8fc2] [641e5d818]
* **/api/(db|publish)**: Do not allow to delete publish objects. Also do not
  allow to delete objects which are used in published objects, if their version
  is pinned. If they are using in published objects without a pinned version,
  deletion is allowed and the link will be set null. If the link cannot be set
  null due to data model constraints, the deletion is not allowed anyways. Also
  improved checking of payload for api/publish: collector must be configured in
  base config. [048fb3a56]
* **DELETE /api/db**: Support purging of linked objects still in use. If linked
  objects are still in use in historic version, they are now set back to a
  `uuid` only ghost version (like if you use `allow_defer` during inject). Also
  in this patch, the API output the `_uuid` for such a ghost object, this can be
  the expected `_uuid` (`"allow_defer": true`) or the `_uuid` of the purged
  linked object. Also, run unique key constraint checks after undelete. This
  marks violating objects using the system tag `UNIQUE_KEY_VIOLATION`.
  [25be5c3b7] [25be5c3b7] [b9a5d3d18]

### Fixed

* **/api/export**: Fixed export when aggregations in the `search` property use
  `filter_parent`. [e18395fd4] [abcf2e6e3]
* **/api/search**: Fixed for linked object hierarchies with parent `off`. If the
  mask setting to edit parents is off, the search for `_path` would not work
  (cause no data would have been in the index). Requires a re-index. [3872c9704]
* **fylr metadata read**: Fixed for `xml`. This fixes reading huge `.xml` files
  by telling Exiftool to not read the `XML` as metadata tags. Use the same
  technique (`-fast3`) for `.zip` files (before we omitted the group `ZIP` on
  output). Also in this patch, pass down "verbose" from fylr convert to the
  subcommands called for a better overview of the called processes. [69b130a36]
* **/api/suggest**: Fixed `HTML` escaping, parallelize execution. This fixes
  html escaping in `"tokens"` and `"fields"` suggestions making it possible to
  properly suggest tokens like `<undefined>`. Also, don't return the `field`
  property if no `"fields"` where requested (but `"fields_suggest": true`).
  Before we added an empty `"fields":[]`, which suggested that no fields have
  been found, albeit really no fields were searched. Parallelize execution of
  the 3 elastic search queries. [954a5a9db]

## Frontend

### New:
 - **New Search Input Interactivity**: The user experience when using the search input has been significantly improved. Some of the changes include:
   - **Query Drag and Drop**: Query elements can now be dragged within the search input to reorder them.
   - **Keyboard Enhancements**: Navigation keys are now more useful and allow moving around the search input. Additionally, CTRL+A selects all query elements and allows for quick clearing of the search input.
   - **Query Element Editor**: To edit a query element, you now need to double-click on it, as a single click only focuses and selects it.
   - **Query Selection**: Using Shift + Click, you can select multiple query elements to delete them selectively.
   - **Future Enhancements**: We are working on further improving this interactivity to enhance the experience with expert search.

### Improved
- **Change Log Sorting**: Added the option to group objects in the main search by weeks when using the Change History field as the sorting criterion.
- **Show Collection (Including Subordinates)**: Improved search behavior for objects in a collection hierarchy, now correctly taking into account permissions and pin_codes.
- **Full Screen Mode**: Improved the detail fullscreen mode. The hierarchy detail now uses the correct theme, and navigating or selecting hierarchical records displays the detail fullscreen view if available.
- **GeoJson**: Se ha a√±adido compatibilidad para linked objects con geo standard en las funcionalidades de mapa.

### Fixed
- **Share Collection**: Fixed an issue that caused a horizontal scroll to appear in the share collection menu.
- **Download Manager**: Fixed an issue that displayed an error when trying to download a search while the filter manager was open.
- **Query Element Editor**: Fixed the layout of the query editor where some fields did not have the correct width.
- **Search Download**: Fixed an error when trying to display admin messages in a search download.
- **Image Loading**: Fixed a race-condition error when attempting to add an error asset placeholder to an element that was no longer available in the DOM.