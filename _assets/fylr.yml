fylr+:
  externalURL: "https://EXAMPLE.COM"

  encryptionKey: "EXAMPLE5cca29f8ddec415fd80bdbe25"

  resources: "/fylr/files/resources"

  logger+:
    timeFormat: "2006-01-02 15:04:05"
    
  db:
    driver: "postgres"
    dsn: "postgres://fylr:fylr@postgresql:5432/fylr?sslmode=disable"

    maxOpenConns: 0
    maxIdleConns: 10
    # The init block is used to pre-fill the database when its created or purged.
    init:
      # Path to base config file. If set, on a fresh install or after a purge this
      # file is used and preloaded into the base config. The format of the file is
      # JSON in API format. Defaults to "", which starts with an empty base
      # config. The empty base config uses defaults which are defined in
      # resources/baseconfig/baseconfig.yml. Unset keys (from a partial base
      # config file), are set to their defaults.
      configFile: ""

      # Inline base config. Works like configFile but used the inlined
      # baseconfig setting in this .yml file. Runs after configFile, so everything
      # in config overwrites settings from configFile. Default is empty.
      config:
        system:
          config:
            purge:
              allow_purge: false
              purge_storage: false
            location_defaults:
              originals: assets
              versions: assets
              backups: backups

      # preconfigure locations for empty databases
      locations:
        # the location's name can be any string which you choose
        #
        # Inside the storage location fylr will create a structure like this:
        #
        # [prefix/]fylr-UUID/originals
        # [prefix/]fylr-UUID/versions
        # [prefix/]fylr-UUID/backups
        assets:
          # The kind is either "file" or "s3" (see below)
          kind: file
          # Each location can configure a prefix which will
          # be attached before the file to be created
          prefix: ""
          # Set to true if files in this location can be
          # purged by FYLR (if the purge api call is used)
          allow_purge: false
          config:
            file:
              # keep in mind: this is a path inside of the container
              dir: "/srv"
        backups:
          # The kind is either "file" or "s3" (see below)
          kind: file
          # Each location can configure a prefix which will
          # be attached before the file to be created
          prefix: ""
          # Set to true if files in this location can be
          # purged by FYLR (if the purge api call is used)
          allow_purge: false
          config:
            file:
              # keep in mind: this is a path inside of the container
              dir: "/fylr/files/backups"

  plugin:
    paths:
    - "/fylr/files/plugins/easydb"
    #urls:
    #- https://github.com/programmfabrik/fylr-plugin-formula-columns/releases/download/v0.1.2/fylr-plugin-formula-columns.zip

    # the following is used initially only (during first start and after purge)
    # This is configured as map with the plugin name as key.
    defaults:
      # default for fylr_example plugin
      fylr_example:
        # enable, set to false to disable the plugin, defaults to true
        enabled: false
        # update_policy: automatic, always, never, defaults to automatic
        update_policy: never
      example-plugin:
        enabled: false
        update_policy: never

  elastic+:
    addresses:
    - "http://elasticsearch:9200"

  services+:
    webapp+:
      addr: ":443"
      path: "/fylr/files/webfrontend"
      tls:
        letsEncrypt:
          email: you@EXAMPLE.COM
          forwardHttpAddr: ":80"
          useStagingCA: false

    api+:
      # the following path is inside the container and typically is mapped to the outside by docker-compose.yml
      webDAVHotfolderPath: "/srv/hotfolder"
      oauth2Server+:
        # This secret is used to sign authorize codes, access and refresh
        # tokens. If unset, a random string is used. If multiple fylr server are
        # serving the same instance, the signingSecret needs to be configured.
        # If not configured, each container recreation results in new tokens.
        # The format is a string of exactly 32 byte length.
        signingSecret: "EXAMPLE8901234567890123456789023"
        clients+:
          # key in next line = value of fylr.services.webapp.oauth.clientID (and a + to indicate using defaults)
          fylr-web-frontend+:
            redirectURIs:
            - https://EXAMPLE.COM/oauth2/callback
